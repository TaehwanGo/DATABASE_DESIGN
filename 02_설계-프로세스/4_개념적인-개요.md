# 4. 개념적인 개요

- 이 장에서 다루는 주제

  - 설계 프로세스 완료의 중요성
  - 임무 목표와 임무 명세 정의
  - 기존 데이터베이스 분석
  - 데이터 구조 생성
  - 테이블 관계 연결 및 결정
  - 업무 규칙 정의 및 결정
  - 뷰의 정의 및 결정
  - 데이터 무결성 재확인
  - 요약
  - 연습문제

- 데이터베이스 설계 프로세스

  - 수행하는 방법
  - 전반적인 생각
  - 프로세스에 포함된 각 순서에 대한 일반적인 생각
  - 이번장에선 이런 데이터베이스 설계 프로세스의 개요를 제공하는 것이 목적이다

- 일곱 단계에 걸쳐 설계 프로세스에 있는 모든 기술들을 모아서 정리했다

- 도움이 될 때
  - 전혀 새로운 데이터베이스 설계할 때
  - 운영중인 데이터베이스를 개선할 때
  - 분석한 결과를 토대로 새로운 데이터베이스를 설계하기 위해 운영 중인 데이터베이스를 설계하는 데 도움이 필요할 때

### 설계 프로세스 완료의 중요성

- 프로세스 설계 전체를 수행하는 것이 정말 필요한가? -> Yes
- 간단한 데이터베이스를 만들 때에도 이와 같은 프로세스를 완료할 필요가 있다
  - 간단한이란 단어는 위험하다 ! -> 어떤 것도 간단한지 않다
- 많은 데이터베이스 문제가 잘못된 데이터베이스 설계에서 기인한다
- 오로지 생략된 부분이 없는, 전체 설계 프로세스를 진행하는 경우에만, 좋은 구조와 무결성을 확보할 수 있을 것이다
- `구조적 무결성, 데이터 무결성의 수준`이 전체적으로 설계 `프로세스를 준수한 수준과 정비례 관계`에 있다
- 좋은 설계도 모든 문제를 없앨 수 없으나 최소화할 수 있다

### 1. 임무 목표와 임무 명세 정의

- 데이터베이스 설계 프로세스의 첫 번째 단계 : 임무 목표와 임무 명세를 정의하는 것
- 임무 명세

  - 데이터베이스의 `목적을 설정`하고 설계 작업을 수행하기 위해 초점을 맞춰야 하는 것을 명확하게 해준다
  - 데이터베이스의 목적을 확인 -> 임무 명세에서 정의
  - 임무 목표도 여기에서 정의

- 임무 목표와 임무 명세를 정의하는 데 포함될 사람들 -> 두 그룹으로 나눔
  - 첫 번재 그룹 : 데이터베이스 개발자, 조직의 장, 관리 직원
  - 두 번째 그룹 : 데이터베이스 개발자, 관리 직원, 사용자 => 핵심 목표를 책임지는 그룹

### 2. 기존 데이터베이스 분석

- 데이터베이스 설계 프로세스의 두 번째 단계 : 기존 데이터 베이스가 있다면, 그것을 분석하는 것에서 시작한다
- 기존 데이터베이스 : 여러 해에 걸쳐 사용하고 있이며, 존재하고 있는 데이터베이스

#### 분석

- 기존 데이터베이스를 분석하는 것은 조직이 그들의 데이터를 사용하고 관리하는 방법에 대해 소중한 가치를 제공하게 될 것이다
- 기존 데이터베이스 분석은 조직이 데이터를 꾸준히 수급하고 제공하는 방안에 대해 검토하게 해준다
- 데이터베이스 관리를 위해 응용프로그램을 사용한다면 데이터를 수집하여 화면에서 보여주는 방법에 대한 연구를 해야한다
- 조직이 웹에서 데이터를 사용하는 방법을 고려해야하며, 데이터베이스와 연동하는 브라우저 기반의 응용프로그램들을 검토해야한다

#### 인터뷰

- 분석엔 사용자와 관리자의 인터뷰를 진행하는 것이 포함된다
- 사용자에게 그들이 데이터베이스를 통해 업무를 수행하는 방식과
  - 현재 정보 관련 요구사항이 무엇인지에 대하여 요청해야 한다
- 인터뷰를 통해
  - 현재 정보와
  - 조직과 관련된 전반적인 정보관련 요구사항의 인식 수준이 어느정도 인지 요청
- 인터뷰는 분석의 중요한 요소이다
  - 최종 데이터베이스 구조에 큰 영향을 미친다
  - 조직의 정보 요구사항에 맞는 데이터베이스를 설계해야한다면, 반드시 인터뷰의 모든 과정을 진행하고 완료해야 한다
- 다음 단계
  - 필드의 초기 목룍을 편집하기 위해 분석
  - 인터뷰를 통해
  - 얻은 정보를 사용하는 것
- 그후
  - 모든 계산될 필드를 제거, 그들 자신의 목록에 포함시킴(?) -> 초기 목록을 개선
  - 설계 프로세스에선 이렇게 만들어진 필드들을 사용할 것이다
  - 개선된 목록은 조직의 기초적인 데이터 요건이 되며, 새로운 데이터베이스 설계의 시작점이 된다
    - 시작점이라고 한 것은 마지막이란 것은 없기 때문, 나머지는 설계가 진행되면서 이런 필드 목록이 개선되고 확장될 것이다
- 한번 초기 필드 목록이 완성되면
  - 간략한 검토와 가능한 추가 개선을 위해 사용자들과 관리자들에게 보낸다
  - 피드백을 요청하여 수정사항에 대한 그들의 제안들을 접수한다
  - 만일 그 제안들이 합리적이고 잘 지원되는 것이라는 생각이 들면, 적절하게 수정하고 그 목록에 현재 상태를 기록한다
  - 그리고 다음 단계를진행하자(-> 데이터 구조 생성)

### 3. 데이터 구조 생성

- 데이터베이스 설계의 세 번째 단계 : 데이터 구조를 생성하는 것
- 이 단계에서 하는 것들

  - 테이블과 필드를 정의
  - 키 설정
  - 모든 필드에 대한 필드 명세를 정의

- 테이블은 데이터베이스에서 정의하는 첫 번째 구조
- 1단계 임무 명세과 2단계 분석을 토대로 테이블에 표현할 다양한 주제를 결정
- 테이블이 하나의 주제만을 표현하며, 여기에 중복된 필드가 없는지를 확실하게 하기 위해 각 테이블을 검토
- 각 테이블에 있는 필드들을 검토
  - 테이블의 특징을 보여주지 못 하는 필드를 삭제하거나 이동
  - 필드들이 단독 값을 저장할 수 있도록
    - 테이블에 있는 모든 다중 구조나 다중값 필드들을 개선
- 각 필드들에 대한 검토를 완료하면

  - 테이블 구조를 검토하고 개선
    - 필드에 수행한 적업 중에 실수로 놓친 부분은 없는지 확인
    - 각 테이블 구조를 적절하게 정의했는지 확인
    - 각 테이블에 대한 적절한 키를 설정
    - 테이블이 적절하게 정의된 기본 키를 가지고 있는지 확인

- 데이터 구조 생성의 마지막 순서 : 데이터베이스에 있는 각 필드에 대한 필드를 명세를 설정하는 것
  - 사용자와 관리자들과 인터뷰를 수행
    - 그들에게 중요한 특정 필드의 특징들을 확인
    - 그들에게 익숙하지 않은 다른 특징들을 검토하고 이야기 하기 위한 과정
  - 인터뷰이후 -> 각 필드들에 대한 필드 명세를 정의하고 문서화
  - 사용자와 관리자들과 추가 개선사항이 있는지에 대한 검토를 한번 더 수행
    - 만일 개선사항이 있다면
      - 검토를 추가 수행
      - 추가 개선
      - 완성된 테이블 구조를 가지고 다음 단계를 진행(-> 테이블관계 연결 및 결정)

### 4. 테이블 관계 연결 및 결정

- 데이터베이스 설계 프로세스의 네 번째 단계 : 테이블 관계 설정하기
- 관계와 관계의 특징을 확인
- 관계 수준의 무결성을 설정하기 위해 사용자와 관리자들과의 인터뷰를 한번 더 수행

  - 개발자가 조직에서 사용되는 데이터의 몯느 측면에 익숙해지는 것은 사실상 불가능
  - 그들이 사용하는 데이터에 대한 지식이 무엇이든 개발자에 굉장히 큰 도움이 된다

- 관계 설정
  - 기본 키, (N:N 관계 필요시)연결 테이블을 통해 테이블 간의 논리적인 연결을 설정한다
- 각 테이블에 대한 참여의 유형 + 참여 정도를 결정
- 참여 특징이 테이블에 저장된 데이터의 특징에 따라 결정되기도 하지만
  - 특정 업무 규칙에 따라 참여의 특징이 결정되는 경우도 있다

### 5. 업무 규칙 정의 및 결정

- `업무 규칙`을 `결정`하고 `정의`하는 것은 데이터베이스 설계 프로세스의 다섯 번째 단계이다.
- 이 단계에선 인터뷰를 잠시 중단
  - 데이터베이스의 다양한 측면에서의 `제약사항을 확인`
  - 업무 규칙을 설정하여 `검증 테이블`을 정의하고 구현
- 조직이 데이터를 사용하는 방법 -> 데이터베이스에서 구현해야 하는 요건 + 제약사항을 결정
- 인터뷰(사용자 또는 관리자)는 데이터, 데이터 구조, 관계에 적용해야하는 특정 제약사항을 확인하는 데 도움이 된다
  - 업무 규칙으로 명세를 설정 -> 문서화
- 예를 들어, 주문처리 데이터베이스로 작업 수행
  - 사용자와 인터뷰
    - 특정 작업들에 대한 상세한 정보를 알고 있다
    - 선적 일자가 주문일자보다 늦어야 한다
    - 기입된 전화번호는 낮 시간에 사용 가능한 번호여야 한다
    - 선적 방식이 기입되어 있어야 한다 등
  - 관리자들과의 인터뷰
    - 데이터베이스의 다양한 측면에서 적용되어야 하는 일반적인 제약사항을 알려준다
    - 연예 기획사의 사무 관리자는 한 명의 대리인이 20명 이상의 연예인을 관리할 수 없으며,
    - 각 연예인들에 대한 홍보 자료는 매년 갱신되어야 한다 등의
    - 일반적인 사안을 주로 다룬다
- 그 다음, 특정 업무 규칙들을 지원할 때 필요한 검증 테이블을 정의하고 구현한다
  - 가정) 조직에서 필드들을 사용하는 방법 : 어던 필드에 일정 범위 이내의 값들만 들어갈 수있다
    - 이런필드들에 저장된 값들의 일관성과 유효성을 보장할 때, 검증 테이블을 사용할 수 있다
  - 업무 규칙에 의해 설정된 무결성의 수준은 조직이 데이터를 보고 사용하는 방식과 직접적인 관계가 있기 때문에 매우 중요하다
  - 데이터를 바라보는 조직의 관점은 조직이 커짐에 따라 바뀌게 될 것이며,
  - 이와 더불어 업무 규칙 역시 바뀌게 될 것이다
- 업무 규칙을 결정하고 설정하는 것은 계속 진행되어야 하며, 반복적인 작업이다
  - 이런 무결성 수준을 적절하게 유지하고자 한다면, 꾸준히, 부지런해야 한다

### 6. 뷰의 정의 및 결정

- 설계 프로세스의 여섯 번째 단계는 뷰를 결정하고 정의하는 것이다
- 다시 한번 인터뷰를 진행
  - 데이터로 작업하는 다양한 방법을 확인
  - 뷰를 설정
- 사용자와 관리자와의 인터뷰를 수행
  - 그들이 각 데이터로 작업을 수행하는 방법을 결정
    - 데이터베이스에 구현할 필요가 있는 뷰의 유형을 확인
    - 예) 상세한 정보를 필요로 하는 그룹, 요약된 정보를 필요로하는 그룹
      - 각 사용자 그룹에 맞는 뷰를 사용할 수 있다
- 적당한 테이블과 필드를 사용하여, 인터뷰를 수행하는 동안 확인했던 뷰를 정의
- 특정 정보를 추출할 때 필요한 뷰들에 대한 표준을 설정
  - 예) 텍사스에 위치한 모든 고객 목록을 보여주는 뷰, 워싱턴에 위치한 승인된 업체들의 총 개수를 보여주는 뷰에 대한 표준을 설정

### 7. 데이터 무결성 재확인

- 데이터 베이스 설계 프로세스의 일곱 번째 단계(마지막 단계) => 데이터 무결성을 검토하는 것
- 각 테이블이 잘 설계된 테이블의 기준에 맞는지
- 첫째, 테이블 내에 있는 필드들이 적절한 구조로 되어 있는지에 대하여 검토
  - 이 과정에서 발견된 문제나 불일치성을 해결하고 다시 한번 구조에 대한 검토를 수행
  - 이와 같은 적절한 개선사항에 대한 적용이 완료된 이후
    - 테이블 수준의 무결성을 점검한다
- 둘째, 각 필드에 대한 필드 명세를 점검하고 검토

  - 필드들에 대한 필요한 개선사항을 적용하고 필드 수준의 무결성을 점검

- 셋째, 각 `관계에 대한 유효성을 검토`하여 `관계 유형`과 관계 내 있는 각 테이블에 대한 `참여 특징`을 확실하게 결정

  - 공유된 필드 사이에 값이 일치하는지와 관계 내의 테이블들에 대한 데이터를 삽입, 갱신, 삭제하는 작업에서 문제는 발생하지 않는지에 대한
    - 관계 무결성을 검토한다

- 넷째(마지막), `업무 규칙을 검토`하고 데이터베이스의 다양한 측면에 있는 `제약사항을 결정`

  - 만일 개인의 인터뷰의 마지막에 또 다른 제약사항이 발견된다면, 새로운 업무 규칙에 추가해야 한다

- 이와 같은 데이터베이스 설계 프로세스 전체를 완료했다면, 논리적인 데이터베이스 구조를 구현할 준비가 되었다
- 그러나 데이터베이스 구조는 조직이 발전함에 따라 항상 개선이 필요하기 때문에 진정한 의미로 완료되었다고 말할 수는 없다

### 요약

- 이 장은 설계 프로세스를 완료하는 것의 중요성에 대해 이야기 해봤고
- 잘 만들어진 설계 방법론의 장점없이 설계하는 것은 잘못된 설계를 하게 된다는 것을 배웠다
- 또한 구조 무결성과 데이터 무결성 수준은 전체 설계 프로세스를 수행한 정도와 정비례 한다는 것을 이야기했다
- 그리고 일관성 없는 데이터와 부정확한 정보는 잘 못된 데이터 베이스와 연관이 있다는 것에 대해 배웠다
- 데이터 베이스 설계 프로세스 전체에 대한 개요를 살펴보았다

1. 데이터베이스에 대한 임무 명세와 임무 목표를 정의한다
   - 임무 명세는 데이터베이스의 목적을 정의하고 임무 목표는 데이터베이스에 있는 데이터를 사용자가 사용하기 위한 작업들을 정의한다
2. 기존 데이터베이스를 분석한다
   - 조직은 기존의 데이터를 수집하고 표현하는 방식을 검토하고, 매일 데이터베이스를 사용하는 방법을 결정하기 위해 사용자와 관리자들과의 인터뷰를 진행하여 조직의 데이터 요구사항을 확인한다
3. 데이터 구조를 생성한다
   - 데이터베이스가 기록을 남기는 대상을 확인하여 테이블을 구성한다
   - 그 다음, 테이블의 대상을 구분할 수 있는 특징들을 필드로 만들어 테이블과 연결시키고
   - 기본 키로 특정 필드(혹은 필드 그룹)를 지정한다.
   - 그 후에 테이블에 있는 모든 필드에 대한 필드 명세를 작성한다
4. 테이블 관계를 결정하고 설정한다
   - 데이터베이스 내의 테이블 사이에 존재하는 관계를 확인하고, 기본 키와 외래 키를 사용하거나 연결 테이블을 사용하여 각 관계에 대한 논리적인 연결을 설정한다. 그 후에 각 관계에 대한 적절한 특징을 설정한다
5. 업무 규칙을 결정하고 정의한다
   - 데이터베이스에 있는 데이터에 적용해야 하는 제약사항을 확인하기 위해 사용자, 관리자와 인터뷰를 진행한다
   - 조직이 데이터를보고 사용하는 방식은 데이터베이스에 적용해야 하는 제약사항의 종류를 결정한다
   - 이런 제약사항들을 업무 규칙으로 선언하고 데이터 무결성의 다양한 수준을 설정할 때 사용한다
6. 뷰를 결정하고 설정한다
   - 데이터베이스에 있는 데이터로 작업하는 방법을 확인하기 위해 사용자와 관리자와의 인터뷰를 진행한다
   - 인터뷰가 완료될 때, 적절하게 뷰를 설정한다
   - 적절한 테이블과 필드를 사용하여 각 뷰에 대한 정의를 하고 제한하거나 범위가 정해진 레코드들을 보여줘야 하는 뷰들에 대한 기준을 설정한다
7. 데이터 무결성을 검토한다
   - 이 단계는 네 순서에 따라 진행된다
   - 첫째, 각 테이블이 설계 기준에 맞는지 확인한다
   - 둘째, 모든 필드 명세들을 점검하고 검토한다
   - 셋째, 각 관계에 대한 유효성을 점검한다
   - 넷째, 업무규칙을 검토하고 확정한다
